#include <LiquidCrystal.h>
LiquidCrystal lcd (8 , 9 , 4 , 5 , 6 , 7) ;

byte kraljica [8] = {
B00000 ,
B01010 ,
B11111 ,
B11111 ,
B01110 ,
B00100 ,
B00000 ,
};

byte pesak [8] = {
B01110 ,
B01110 ,
B00100 ,
B11111 ,
B00100 ,
B01010 ,
B10001 ,
};

unsigned char taster_staro, taster_novo;
int xp, yp;
int xk, yk;
int i;
int x,y;

void setup () {
  lcd.begin(16,2) ;
  lcd.createChar(0,kraljica); 
  lcd.createChar(1,pesak);
  taster_staro = 0;
  taster_novo = 0;
  randomSeed (analogRead(0));
  xp = random (0, 15); 
  yp = random (0, 1);
  xk = 0;
  yk = 0;
  lcd.setCursor (xk, yk) ;
  lcd.write ( byte (0) ) ;
  lcd.setCursor (xp, yp) ;
  lcd.write ( byte(1)) ;

}
void loop () {
  taster_novo = ocitaj_taster();
  if(taster_novo != taster_staro)
  {
    switch(taster_novo)
    {
      case 1: //select
      break;
      case 2: //left
      xk--;
      lcd.clear();
      lcd.setCursor(xk,yk);
      lcd.write(byte(0));
      lcd.setCursor (xp, yp);
      lcd.write(byte(1));
      delay(100);
      if(xk==xp && yk==yp)
      {
        for(i=0; i<10; i++)
        {
        lcd.clear();
        x = random(0, 8);
        y = random(0,1);
        lcd.setCursor(x,y);
        lcd.print("SAH-MAT");
        delay(500);
        }   
        lcd.clear();
      }
      break;
      case 3: //up
      yk++;
      lcd.clear();
      lcd.setCursor(xk,yk);
      lcd.write(byte(0));
      lcd.setCursor (xp, yp);
      lcd.write(byte(1));
      delay(100);
      if(xk==xp && yk==yp)
      {
        for(i=0; i<10; i++)
        {
        lcd.clear();
        x = random(0, 8);
        y = random(0,1);
        lcd.setCursor(x,y);
        lcd.print("SAH-MAT");
        delay(500);
        } 
        lcd.clear();
      }
      break;
      case 4: //down
      yk--;;
      lcd.clear();
      lcd.setCursor(xk,yk);
      lcd.write(byte(0));
      lcd.setCursor (xp, yp);
      lcd.write(byte(1));
      delay(100);
      if(xk==xp && yk==yp)
      {
        for(i=0; i<10; i++)
        {
        lcd.clear();
        x = random(0, 8);
        y = random(0,1);
        lcd.setCursor(x,y);
        lcd.print("SAH-MAT");
        delay(500);
        } 
        lcd.clear();
      }
      break;
      case 5: //right
      xk++;
      lcd.clear();
      lcd.setCursor(xk,yk);
      lcd.write(byte(0));
      lcd.setCursor (xp, yp);
      lcd.write(byte(1));
      delay(100);
      if(xk==xp && yk==yp)
      {
        for(i=0; i<10; i++)
        {
        lcd.clear();
        x = random(0, 8);
        y = random(0,1);
        lcd.setCursor(x,y);
        lcd.print("SAH-MAT");
        delay(500);
        }
        lcd.clear();
      }
      break;
      default:
      break;
    }
  }
taster_staro = taster_novo;
}
byte ocitaj_taster()
{
int tmp = analogRead(0); //stanje tastera se ocitava preko
//analognog ulaza 0
if (tmp > 635 && tmp < 645) //SELECT
return 1;
if (tmp > 405 && tmp < 415) //LEFT
return 2;
if (tmp > 95 && tmp < 105) //UP
return 3;
if (tmp > 252 && tmp < 262) //DOWN
return 4;
if (tmp < 5) //RIGHT
return 5;
return 0; //nije pritisnut nijedan od tastera
}


